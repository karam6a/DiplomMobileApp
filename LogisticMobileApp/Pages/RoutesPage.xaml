<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:helpers="clr-namespace:LogisticMobileApp.Helpers"
             xmlns:dx="http://schemas.devexpress.com/maui"
             x:Class="LogisticMobileApp.Pages.RoutesPage"
             Style="{StaticResource PageStyle}"
             Title="{Binding RouteName}">

    <Grid RowDefinitions="Auto,*">

        <!-- Заголовок -->
        <Label Grid.Row="0"
               Text="Точки маршрута"
               FontSize="22"
               FontAttributes="Bold"
               HorizontalOptions="Center"
               Margin="0,15,0,10" />

        <!-- Список клиентов -->
        <dx:DXCollectionView Grid.Row="1"
                        ItemsSource="{Binding Clients}"
                        Margin="10"
                        VerticalOptions="Fill">
            <dx:DXCollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame CornerRadius="12"
                           Margin="0,6"
                           Padding="16"
                           HasShadow="True"
                           BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1E1E1E}"
                           BorderColor="{AppThemeBinding Light=#E0E0E0, Dark=#333333}">

                        <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                            <VerticalStackLayout Spacing="6">
                                <!-- Название клиента -->
                                <Label Text="{Binding Name}"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="{AppThemeBinding Light=Black, Dark=White}" />

                                <!-- Адрес -->
                                <Label Text="{Binding Address}"
                                       FontSize="14"
                                       TextColor="{AppThemeBinding Light=DimGray, Dark=Gainsboro}" />

                                <!-- Количество контейнеров -->
                                <HorizontalStackLayout Spacing="5">
                                    <Label Text="Контейнеров:"
                                           FontSize="13"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}" />
                                    <Label Text="{Binding ContainerCount}"
                                           FontSize="13"
                                           TextColor="#512DA8"
                                           FontAttributes="Bold" />
                                </HorizontalStackLayout>
                            </VerticalStackLayout>

                            <!-- Иконка карты -->
                            <ImageButton Grid.Column="1"
                                         Source="map_icon.svg"
                                         BackgroundColor="Transparent"
                                         WidthRequest="40"
                                         HeightRequest="40">
                                <ImageButton.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnMapIconTapped" CommandParameter="{Binding .}" />
                                </ImageButton.GestureRecognizers>
                            </ImageButton>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </dx:DXCollectionView.ItemTemplate>
        </dx:DXCollectionView>

    </Grid>
</ContentPage>
